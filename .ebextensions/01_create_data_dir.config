files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/01_create_data_dir.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      APP_DIR=/var/app/current/hotel-booking-app
      DATA_DIR="$APP_DIR/data"
      if [ ! -d "$DATA_DIR" ]; then
        mkdir -p "$DATA_DIR"
        chown webapp:webapp "$DATA_DIR" || true
        chmod 775 "$DATA_DIR" || true
      fi

container_commands:
  01_create_data_dir:
    command: "mkdir -p /var/app/current/hotel-booking-app/data && chown -R webapp:webapp /var/app/current/hotel-booking-app/data || true && chmod -R 0775 /var/app/current/hotel-booking-app/data || true"
    leader_only: false
